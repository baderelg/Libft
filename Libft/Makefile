# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
#             ๐จ COLORS
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

RESET = \033[0m
RED = \033[31m
GREEN = \033[32m
YELLOW = \033[33m
BLUE = \033[34m
MAGENTA = \033[35m
CYAN = \033[36m
GRAY = \033[90m
UNDERLINE = \033[4m

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
#         ๐๏ธ CONFIGURATION
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

NAME = libft.a

LIBC = ft_isalpha ft_isdigit ft_isalnum ft_isascii ft_isprint \
	   ft_strlen ft_memset ft_bzero ft_memcpy ft_memmove ft_strlcpy \
	   ft_strlcat ft_toupper ft_tolower ft_strchr ft_strrchr ft_strncmp

ADDITIONAL = ft_memchr ft_memcmp ft_strnstr ft_atoi ft_calloc ft_strdup \
			 ft_substr ft_strjoin ft_strtrim ft_split ft_itoa ft_strmapi \
			 ft_striteri ft_putchar_fd ft_putstr_fd ft_putendl_fd ft_putnbr_fd

BONUS = ft_lstnew ft_lstadd_front ft_lstsize ft_lstlast ft_lstadd_back \
		ft_lstdelone ft_lstclear ft_lstiter ft_lstmap

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
#      ๐ง SETUP & DEPENDENCIES
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

SRCS = $(addsuffix .c, ${LIBC}) $(addsuffix .c, ${ADDITIONAL})

BONUS_SRCS = $(addsuffix _bonus.c, ${BONUS})

OBJS = ${SRCS:.c=.o}

BONUS_OBJS = ${BONUS_SRCS:.c=.o}

DEPS =  $(OBJS:.o=.d) $(BONUS_OBJS:.o=.d)

CC = cc
CFLAGS = -Wall -Wextra -Werror -I ./ -MMD -MP
AR = ar
ARFLAGS = rcs

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
#        ๐ฝ COMPILATION RULE
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

.c.o:
	@printf "Compiling $(BLUE)%-25s$(RESET)" $<
	@$(CC) $(CFLAGS) -c $< -o ${<:.c=.o} && printf "โ\n" || printf "โ\n"

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
#            ๐ฏ TARGETS
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

all:	$(NAME)

$(NAME):	$(OBJS)
	@echo "$(MAGENTA)โณ Archiving to $(NAME)$(RESET)"
	@$(AR) $(ARFLAGS) $(NAME) $(OBJS)
	@echo "$(GREEN)โ $(NAME) created$(RESET)"

bonus:	all $(BONUS_OBJS)
	@$(AR) $(ARFLAGS) $(NAME) $(BONUS_OBJS)
	@echo "$(GREEN)โ libft.a $(UNDERLINE)with Bonus$(RESET)$(GREEN) created$(RESET)"
	@echo "$(CYAN)๐ $(words $(BONUS_OBJS)) bonus functions added$(RESET)"

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
#            ๐งน CLEANING
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

clean:
	@rm -f $(OBJS) $(BONUS_OBJS) $(OBJS:.o=.d) $(BONUS_OBJS:.o=.d)
	@echo "$(YELLOW)๐งน Objects and Dependencies deleted (clean)$(RESET)"

fclean: clean
	@rm -f $(NAME)
	@echo "$(RED)โ $(NAME) removed (fclean)$(RESET)"

re:	fclean all

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
#         ๐ HELP & FOOTER
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

help:
	@echo "$(BLUE)Available targets:$(RESET)"
	@echo "$(YELLOW)all      $(RESET)โ Build libft.a"
	@echo "$(YELLOW)bonus    $(RESET)โ Build with bonus"
	@echo "$(YELLOW)clean    $(RESET)โ Delete .o files"
	@echo "$(YELLOW)fclean   $(RESET)โ Full clean (including libft.a)"
	@echo "$(YELLOW)re       $(RESET)โ fclean + all"

-include $(DEPS)

.PHONY: all clean fclean re bonus
